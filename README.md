# Zai Toggle Script

‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏±‡∏ö‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á **Zai API** ‡∏Å‡∏±‡∏ö **Anthropic Default** ‡πÉ‡∏ô Claude Code ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á restart

## ‡πÑ‡∏ü‡∏•‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö

```
~/DataStore/me/claude/zai/
‚îú‚îÄ‚îÄ toggle.sh       # Script ‡∏´‡∏•‡∏±‡∏Å
‚îú‚îÄ‚îÄ env.sh          # Config template (‡πÉ‡∏™‡πà API key ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ)
‚îú‚îÄ‚îÄ alias.sh        # Shell aliases
‚îú‚îÄ‚îÄ README.md       # ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ
‚îî‚îÄ‚îÄ CHANGELOG.md    # ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
```

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ `.zshrc`

```bash
# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏ó‡πâ‡∏≤‡∏¢ ~/.zshrc
export ZAI_DIR="$HOME/DataStore/me/claude/zai"
source "$ZAI_DIR/alias.sh"
```

### 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key

```bash
nano ~/DataStore/me/claude/zai/env.sh
```

‡πÅ‡∏Å‡πâ:
```bash
ZAI_AUTH_TOKEN="your-new-api-key-here"  # <- ‡πÉ‡∏™‡πà key ‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
ZAI_BASE_URL="https://api.z.ai/api/anthropic"
ZAI_TIMEOUT_MS="3000000"
```

### 3. ‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î shell

```bash
source ~/.zshrc
```

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

```bash
zai on      # ‡πÄ‡∏õ‡∏¥‡∏î Zai API
zai off     # ‡∏õ‡∏¥‡∏î Zai (‡∏Å‡∏•‡∏±‡∏ö Anthropic default)
zai status  # ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
zai edit    # ‡πÅ‡∏Å‡πâ‡πÑ‡∏ü‡∏•‡πå config
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á

```bash
$ zai status
üü¢ Zai: ENABLED
   Base URL: https://api.z.ai/api/anthropic
   Session env: /Users/natthaphan/.claude/session-env.sh

$ zai off
‚úì Zai config DISABLED (using default Anthropic)

$ zai status
‚ö™ Zai: DISABLED (default Anthropic)

$ zai on
‚úì Zai config ENABLED
```

## ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   zai on/off    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ~/.zai-env             ‚îÇ  ‚Üê Toggle ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ~/.claude/session-env.sh‚îÇ  ‚Üê Claude ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Claude Code Session    ‚îÇ  ‚Üê ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á restart!
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

| ‡πÑ‡∏ü‡∏•‡πå | ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå |
|------|--------------|
| `~/.zai-env` | Config ‡∏´‡∏•‡∏±‡∏Å (toggle script ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà) |
| `~/.claude/session-env.sh` | Runtime env (Claude ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å bash command) |
| `~/.claude/settings.json` | ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `CLAUDE_ENV_FILE` ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà |

## Troubleshooting

### zai status ‡πÅ‡∏™‡∏î‡∏á ENABLED ‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ Zai ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

1. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÉ‡∏™‡πà key ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô `env.sh` ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
2. ‡∏£‡∏±‡∏ô `zai on` ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
3. ‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏ü‡∏•‡πå `~/.claude/session-env.sh` ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### ‡∏£‡∏±‡∏ô `zai on` ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•

1. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ `.zshrc` ‡∏°‡∏µ `source` ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
2. ‡∏•‡∏≠‡∏á `source ~/.zshrc` ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
3. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ `CLAUDE_ENV_FILE` ‡πÉ‡∏ô `settings.json` ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### Key ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Zai dashboard ‡∏™‡∏£‡πâ‡∏≤‡∏á key ‡πÉ‡∏´‡∏°‡πà
2. ‡∏£‡∏±‡∏ô `zai edit` ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏Å‡πâ key
3. ‡∏£‡∏±‡∏ô `zai on` ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

## Security Best Practices

1. **‡∏´‡πâ‡∏≤‡∏° commit** `env.sh` ‡∏Ç‡∏∂‡πâ‡∏ô git (‡∏°‡∏µ API key)
2. **Revoke key** ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
3. **‡∏´‡∏°‡∏∏‡∏ô key** ‡∏ö‡πâ‡∏≤‡∏á (rotate periodically)

## License

MIT
